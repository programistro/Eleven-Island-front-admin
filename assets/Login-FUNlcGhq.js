import{u as _,r,j as o,I as p,a as b}from"./index-Ch5GzBz_.js";const d="/assets/iconLogo2-_aIjzRRL.svg";function j(){const i=_(),a=localStorage.getItem("token"),[n,t]=r.useState({login:!1,label:""}),[l,m]=r.useState({login:"",password:""}),c=(s,e)=>{m({...l,[e]:s})},v=s=>{var e,g,u,h;return((e=s==null?void 0:s.login)==null?void 0:e.length)<=0||((g=s==null?void 0:s.password)==null?void 0:g.length)<=0?(t({[((u=s==null?void 0:s.login)==null?void 0:u.length)<=0?"login":((h=s==null?void 0:s.password)==null?void 0:h.length)<=0?"password":""]:!0,label:"Поле не заполнено"}),!1):(t({login:!1,label:""}),!0)},x=async()=>{if(v(l))try{const e=await b.post("https://Backendeleven.ru/Token/get-token-for-admin",{username:l.login.trim(),password:l.password.trim()});e.status>=200&&e.status<300?(console.log("Запрос выполнен успешно:",e.data),localStorage.setItem("token",e.data),i(0)):console.error("Что-то пошло не так:",e.status,e.data)}catch(e){console.error(e),e.response.status===401&&t({login:!0,label:"логин или пароль неверный!"})}};return r.useEffect(()=>{a&&i("/")},[a]),o.jsxs("div",{children:[o.jsx("div",{className:"header__login",children:o.jsx("img",{src:d,alt:"iconLogo"})}),o.jsx("div",{className:"body__login",children:o.jsxs("div",{className:"box__login",children:[o.jsx("h1",{className:"title__login",children:"Вход"}),o.jsxs("div",{className:"div__login",children:[o.jsxs("div",{className:"inputs__login",children:[o.jsx(p,{error:n==null?void 0:n.login,labelError:n.label,label:"Логин",value:l==null?void 0:l.login,onChange:s=>c(s.target.value,"login")}),o.jsx(p,{error:n==null?void 0:n.password,labelError:n.label,label:"Пароль",value:l==null?void 0:l.password,onChange:s=>c(s.target.value,"password")})]}),o.jsx("button",{className:"button__component",onClick:x,children:"Войти"})]})]})})]})}export{j as default};

import{r as c,j as e,I as _,b as p}from"./index-Ch5GzBz_.js";const j=({url:n,handleFileChange:x})=>{const l=c.useRef(null),[a,i]=c.useState(null),[r,h]=c.useState(""),s=()=>{l.current&&l.current.click()};return e.jsxs("div",{children:[e.jsx("input",{type:"file",ref:l,style:{display:"none"},accept:"video/*",onChange:t=>x(t.target.files[0],i,h,n)}),a&&e.jsx("div",{style:{marginTop:"20px"},children:e.jsxs("video",{controls:!0,style:{maxWidth:"300px",border:"1px solid #ddd"},children:[e.jsx("source",{src:a,type:"video/mp4"}),"Ваш браузер не поддерживает воспроизведение видео."]})}),a?e.jsx("button",{style:{width:"200px"},onClick:()=>i(""),children:"Удалить видео"}):e.jsx("button",{style:{width:"200px"},onClick:s,children:"Загрузить видео"}),r&&e.jsx("p",{style:{color:"red"},children:r})]})};function b(){const[n,x]=c.useState(""),[l,a]=c.useState(""),i=async({url:s,data:t,payload:o=()=>{}})=>{console.log(n);try{const d=await p.post(s,t);console.log(d.data),o()}catch(d){console.error(d)}},r=async(s,t,o,d)=>{if(s.size<30000048)try{const m=new FileReader;m.onloadend=()=>{const u=m.result;t(u),console.log(JSON.stringify(u)),i({url:d,data:{source:u,name:"video"}}),o("")},m.readAsDataURL(s)}catch{o("Ошибка при загрузке файла.")}else o("Пожалуйста, выберите файл до 30МБ.")},h=async()=>{var s,t;try{const o=await p.get("/CollectionProduct/get-all-collection-banner");a((t=o==null?void 0:o.data[((s=o==null?void 0:o.data)==null?void 0:s.length)-1])==null?void 0:t.name)}catch(o){console.error(o)}};return c.useEffect(()=>{h()},[]),e.jsxs("div",{className:"box__home",children:[e.jsxs("div",{className:"com__box",children:[e.jsxs("div",{className:"top__com",children:[e.jsx("h1",{children:"Название новой коллекции"}),e.jsx("p",{children:"Название коллекции которое будет отображаться на главном баннере"})]}),e.jsx("div",{className:"top__com",children:e.jsxs("p",{children:["Текущий: ",l]})}),e.jsxs("div",{className:"bottom__com",children:[e.jsx(_,{value:n,onChange:s=>x(s.target.value)}),e.jsx("button",{onClick:()=>{i({url:"CollectionProduct/add-collection-banner",data:{name:n},payload:()=>{x("")}}),setTimeout(h(),1e3)},children:"Сохранить"})," "]})]}),e.jsxs("div",{className:"com__box",children:[e.jsxs("div",{className:"top__com",children:[e.jsx("h1",{children:"Десктоп версия"}),e.jsx("p",{children:"Загрузите файл до 30мб"})]}),e.jsx("div",{className:"bottom__com",children:e.jsx(j,{url:"/Banner/upload-image",handleFileChange:r})})]}),e.jsxs("div",{className:"com__box",children:[e.jsxs("div",{className:"top__com",children:[e.jsx("h1",{children:"Мобильная версия"}),e.jsx("p",{children:"Загрузите файл до 30мб"})]}),e.jsx("div",{className:"bottom__com",children:e.jsx(j,{url:"/Banner/add-banner-mobile",handleFileChange:r})})]})]})}export{b as default};
